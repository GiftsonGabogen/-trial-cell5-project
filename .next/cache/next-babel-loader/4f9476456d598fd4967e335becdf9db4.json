{"ast":null,"code":"const Movie = require(\"../models/Movie.model\");\n\nconst mongoose = require(\"mongoose\");\n\nconst resolvers = {\n  Query: {\n    getMovies: () => {\n      const data = Movie.find().then(res => {\n        return res;\n      });\n      return {\n        success: true,\n        message: \"got all Movies\",\n        movies: data\n      };\n    },\n    getMovie: async (_, {\n      _id\n    }) => {\n      const data = await Movie.find({\n        _id: _id\n      }).then(res => {\n        return res[0];\n      });\n      return {\n        success: true,\n        message: \"got movie\",\n        movie: data\n      };\n    }\n  },\n  Mutation: {\n    addMovie: async (_, {\n      name,\n      myrate\n    }) => {\n      const newMovie = new Movie({\n        _id: new mongoose.Types.ObjectId(),\n        name,\n        myrate\n      });\n      const data = await newMovie.save();\n      return {\n        success: true,\n        message: \"added Movie Successfully\",\n        movie: data\n      };\n    },\n    deleteMovie: async (_, {\n      _id\n    }) => {\n      const data = await Movie.findByIdAndDelete(_id);\n      return {\n        success: true,\n        message: \"deleted Movie Successfully\",\n        movie: data\n      };\n    },\n    updateMovie: async (_, {\n      _id,\n      name,\n      myrate\n    }) => {\n      const data = await Movie.findByIdAndUpdate(_id, {\n        $set: {\n          name,\n          myrate\n        }\n      }, {\n        new: true\n      });\n      return {\n        success: true,\n        message: \"added Movie Successfully\",\n        movie: data\n      };\n    }\n  }\n};\nmodule.exports = resolvers;","map":{"version":3,"sources":["/Users/lucky/Documents/trial/crudList/apollo/resolvers.ts"],"names":["Movie","require","mongoose","resolvers","Query","getMovies","data","find","then","res","success","message","movies","getMovie","_","_id","movie","Mutation","addMovie","name","myrate","newMovie","Types","ObjectId","save","deleteMovie","findByIdAndDelete","updateMovie","findByIdAndUpdate","$set","new","module","exports"],"mappings":"AAAA,MAAMA,KAAK,GAAGC,OAAO,CAAC,uBAAD,CAArB;;AACA,MAAMC,QAAQ,GAAGD,OAAO,CAAC,UAAD,CAAxB;;AAEA,MAAME,SAAS,GAAG;AACjBC,EAAAA,KAAK,EAAE;AACNC,IAAAA,SAAS,EAAE,MAAM;AAChB,YAAMC,IAAI,GAAGN,KAAK,CAACO,IAAN,GAAaC,IAAb,CAAkBC,GAAG,IAAI;AACrC,eAAOA,GAAP;AACA,OAFY,CAAb;AAGA,aAAO;AACNC,QAAAA,OAAO,EAAE,IADH;AAENC,QAAAA,OAAO,EAAE,gBAFH;AAGNC,QAAAA,MAAM,EAAEN;AAHF,OAAP;AAKA,KAVK;AAWNO,IAAAA,QAAQ,EAAE,OAAOC,CAAP,EAAU;AAAEC,MAAAA;AAAF,KAAV,KAAsB;AAC/B,YAAMT,IAAI,GAAG,MAAMN,KAAK,CAACO,IAAN,CAAW;AAAEQ,QAAAA,GAAG,EAAEA;AAAP,OAAX,EAAyBP,IAAzB,CAA8BC,GAAG,IAAI;AACvD,eAAOA,GAAG,CAAC,CAAD,CAAV;AACA,OAFkB,CAAnB;AAGA,aAAO;AACNC,QAAAA,OAAO,EAAE,IADH;AAENC,QAAAA,OAAO,EAAE,WAFH;AAGNK,QAAAA,KAAK,EAAEV;AAHD,OAAP;AAKA;AApBK,GADU;AAuBjBW,EAAAA,QAAQ,EAAE;AACTC,IAAAA,QAAQ,EAAE,OAAOJ,CAAP,EAAU;AAAEK,MAAAA,IAAF;AAAQC,MAAAA;AAAR,KAAV,KAA+B;AACxC,YAAMC,QAAQ,GAAG,IAAIrB,KAAJ,CAAU;AAC1Be,QAAAA,GAAG,EAAE,IAAIb,QAAQ,CAACoB,KAAT,CAAeC,QAAnB,EADqB;AAE1BJ,QAAAA,IAF0B;AAG1BC,QAAAA;AAH0B,OAAV,CAAjB;AAKA,YAAMd,IAAI,GAAG,MAAMe,QAAQ,CAACG,IAAT,EAAnB;AACA,aAAO;AACNd,QAAAA,OAAO,EAAE,IADH;AAENC,QAAAA,OAAO,EAAE,0BAFH;AAGNK,QAAAA,KAAK,EAAEV;AAHD,OAAP;AAKA,KAbQ;AAcTmB,IAAAA,WAAW,EAAE,OAAOX,CAAP,EAAU;AAAEC,MAAAA;AAAF,KAAV,KAAsB;AAClC,YAAMT,IAAI,GAAG,MAAMN,KAAK,CAAC0B,iBAAN,CAAwBX,GAAxB,CAAnB;AACA,aAAO;AACNL,QAAAA,OAAO,EAAE,IADH;AAENC,QAAAA,OAAO,EAAE,4BAFH;AAGNK,QAAAA,KAAK,EAAEV;AAHD,OAAP;AAKA,KArBQ;AAsBTqB,IAAAA,WAAW,EAAE,OAAOb,CAAP,EAAU;AAAEC,MAAAA,GAAF;AAAOI,MAAAA,IAAP;AAAaC,MAAAA;AAAb,KAAV,KAAoC;AAChD,YAAMd,IAAI,GAAG,MAAMN,KAAK,CAAC4B,iBAAN,CAClBb,GADkB,EAElB;AAAEc,QAAAA,IAAI,EAAE;AAAEV,UAAAA,IAAF;AAAQC,UAAAA;AAAR;AAAR,OAFkB,EAGlB;AAAEU,QAAAA,GAAG,EAAE;AAAP,OAHkB,CAAnB;AAKA,aAAO;AACNpB,QAAAA,OAAO,EAAE,IADH;AAENC,QAAAA,OAAO,EAAE,0BAFH;AAGNK,QAAAA,KAAK,EAAEV;AAHD,OAAP;AAKA;AAjCQ;AAvBO,CAAlB;AA4DAyB,MAAM,CAACC,OAAP,GAAiB7B,SAAjB","sourcesContent":["const Movie = require(\"../models/Movie.model\");\nconst mongoose = require(\"mongoose\");\n\nconst resolvers = {\n\tQuery: {\n\t\tgetMovies: () => {\n\t\t\tconst data = Movie.find().then(res => {\n\t\t\t\treturn res;\n\t\t\t});\n\t\t\treturn {\n\t\t\t\tsuccess: true,\n\t\t\t\tmessage: \"got all Movies\",\n\t\t\t\tmovies: data\n\t\t\t};\n\t\t},\n\t\tgetMovie: async (_, { _id }) => {\n\t\t\tconst data = await Movie.find({ _id: _id }).then(res => {\n\t\t\t\treturn res[0];\n\t\t\t});\n\t\t\treturn {\n\t\t\t\tsuccess: true,\n\t\t\t\tmessage: \"got movie\",\n\t\t\t\tmovie: data\n\t\t\t};\n\t\t}\n\t},\n\tMutation: {\n\t\taddMovie: async (_, { name, myrate }) => {\n\t\t\tconst newMovie = new Movie({\n\t\t\t\t_id: new mongoose.Types.ObjectId(),\n\t\t\t\tname,\n\t\t\t\tmyrate\n\t\t\t});\n\t\t\tconst data = await newMovie.save();\n\t\t\treturn {\n\t\t\t\tsuccess: true,\n\t\t\t\tmessage: \"added Movie Successfully\",\n\t\t\t\tmovie: data\n\t\t\t};\n\t\t},\n\t\tdeleteMovie: async (_, { _id }) => {\n\t\t\tconst data = await Movie.findByIdAndDelete(_id);\n\t\t\treturn {\n\t\t\t\tsuccess: true,\n\t\t\t\tmessage: \"deleted Movie Successfully\",\n\t\t\t\tmovie: data\n\t\t\t};\n\t\t},\n\t\tupdateMovie: async (_, { _id, name, myrate }) => {\n\t\t\tconst data = await Movie.findByIdAndUpdate(\n\t\t\t\t_id,\n\t\t\t\t{ $set: { name, myrate } },\n\t\t\t\t{ new: true }\n\t\t\t);\n\t\t\treturn {\n\t\t\t\tsuccess: true,\n\t\t\t\tmessage: \"added Movie Successfully\",\n\t\t\t\tmovie: data\n\t\t\t};\n\t\t}\n\t}\n};\n\nmodule.exports = resolvers;\n"]},"metadata":{},"sourceType":"script"}