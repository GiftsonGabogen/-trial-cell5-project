{"ast":null,"code":"/* This is a database connection function*/\nimport mongoose from \"mongoose\";\nconst connection = {};\n/* creating connection object*/\n\nconst dbConnect = handler => async (req, res) => {\n  if (mongoose.connections[0].readyState !== 1) {\n    try {\n      await mongoose.connect(process.env.MONGODB_URI, {\n        useNewUrlParser: true,\n        useUnifiedTopology: true,\n        useCreateIndex: true,\n        useFindAndModify: false\n      });\n    } catch (err) {\n      console.error(err.message);\n      process.exit(1);\n    }\n  }\n\n  return handler(req, res);\n};\n\nconst db = mongoose.connection;\ndb.once(\"open\", () => {\n  console.log(\"MongoDB connected.\");\n});\nexport default dbConnect;","map":{"version":3,"sources":["/Users/lucky/Documents/trial/crudList/utils/dbConnect.js"],"names":["mongoose","connection","dbConnect","handler","req","res","connections","readyState","connect","process","env","MONGODB_URI","useNewUrlParser","useUnifiedTopology","useCreateIndex","useFindAndModify","err","console","error","message","exit","db","once","log"],"mappings":"AAAA;AACA,OAAOA,QAAP,MAAqB,UAArB;AAEA,MAAMC,UAAU,GAAG,EAAnB;AAAuB;;AAEvB,MAAMC,SAAS,GAAGC,OAAO,IAAI,OAAOC,GAAP,EAAYC,GAAZ,KAAoB;AAChD,MAAIL,QAAQ,CAACM,WAAT,CAAqB,CAArB,EAAwBC,UAAxB,KAAuC,CAA3C,EAA8C;AAC7C,QAAI;AACH,YAAMP,QAAQ,CAACQ,OAAT,CAAiBC,OAAO,CAACC,GAAR,CAAYC,WAA7B,EAA0C;AAC/CC,QAAAA,eAAe,EAAE,IAD8B;AAE/CC,QAAAA,kBAAkB,EAAE,IAF2B;AAG/CC,QAAAA,cAAc,EAAE,IAH+B;AAI/CC,QAAAA,gBAAgB,EAAE;AAJ6B,OAA1C,CAAN;AAMA,KAPD,CAOE,OAAOC,GAAP,EAAY;AACbC,MAAAA,OAAO,CAACC,KAAR,CAAcF,GAAG,CAACG,OAAlB;AACAV,MAAAA,OAAO,CAACW,IAAR,CAAa,CAAb;AACA;AACD;;AAED,SAAOjB,OAAO,CAACC,GAAD,EAAMC,GAAN,CAAd;AACA,CAhBD;;AAkBA,MAAMgB,EAAE,GAAGrB,QAAQ,CAACC,UAApB;AACAoB,EAAE,CAACC,IAAH,CAAQ,MAAR,EAAgB,MAAM;AACrBL,EAAAA,OAAO,CAACM,GAAR,CAAY,oBAAZ;AACA,CAFD;AAIA,eAAerB,SAAf","sourcesContent":["/* This is a database connection function*/\nimport mongoose from \"mongoose\";\n\nconst connection = {}; /* creating connection object*/\n\nconst dbConnect = handler => async (req, res) => {\n\tif (mongoose.connections[0].readyState !== 1) {\n\t\ttry {\n\t\t\tawait mongoose.connect(process.env.MONGODB_URI, {\n\t\t\t\tuseNewUrlParser: true,\n\t\t\t\tuseUnifiedTopology: true,\n\t\t\t\tuseCreateIndex: true,\n\t\t\t\tuseFindAndModify: false\n\t\t\t});\n\t\t} catch (err) {\n\t\t\tconsole.error(err.message);\n\t\t\tprocess.exit(1);\n\t\t}\n\t}\n\n\treturn handler(req, res);\n};\n\nconst db = mongoose.connection;\ndb.once(\"open\", () => {\n\tconsole.log(\"MongoDB connected.\");\n});\n\nexport default dbConnect;\n"]},"metadata":{},"sourceType":"module"}