{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"/Users/lucky/Documents/trial/crudList/pages/index.jsx\",\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport styled from \"styled-components\";\nimport { useState } from \"react\";\nimport { ADD_MOVIE_MUTATION } from \"../components/Mutations\";\nimport { MOVIES_QUERY } from \"../components/Query\";\nimport { useQuery, useMutation } from \"@apollo/client\";\nimport Movietable from \"../components/Movietable.jsx\";\nvar Wrapper = styled.div.withConfig({\n  displayName: \"pages__Wrapper\",\n  componentId: \"y0yr16-0\"\n})([\"padding:40px;table{min-width:1000px;}.HeadContainer{display:grid;grid-template-columns:1fr 1fr 3fr;padding:50px 0px;.FormContainer{form{display:grid;grid-template-columns:1fr 1fr;grid-gap:20px;input[type=\\\"submit\\\"]{grid-column:1/3;}}}}\"]);\n_c = Wrapper;\nexport default function Home() {\n  _s();\n\n  var _this = this;\n\n  var initialSort = {\n    name: {\n      sort: \"\"\n    },\n    myrate: {\n      sort: \"asc\"\n    }\n  };\n  var initialSearchFilter = \"\";\n\n  if (true) {\n    initialSort = localStorage.getItem(\"sort\") ? localStorage.getItem(\"sort\") : initialSort;\n    initialSearchFilter = localStorage.getItem(\"search\") ? localStorage.getItem(\"search\") : initialSearchFilter;\n  }\n\n  var _useState = useState(initialSort),\n      sortMethod = _useState[0],\n      setSortMethod = _useState[1];\n\n  var _useState2 = useState(initialSearchFilter),\n      searchFilter = _useState2[0],\n      setSearchFilter = _useState2[1]; //Querying the Movies\n\n\n  var _useQuery = useQuery(MOVIES_QUERY),\n      data = _useQuery.data,\n      error = _useQuery.error,\n      loading = _useQuery.loading; //Mutation for Adding Movie\n\n\n  var _useMutation = useMutation(ADD_MOVIE_MUTATION, {\n    update: function update(proxy, _ref) {\n      var addMovie = _ref.data.addMovie;\n      var newMovie = addMovie.movie;\n      var data = proxy.readQuery({\n        query: MOVIES_QUERY\n      });\n      proxy.writeQuery({\n        query: MOVIES_QUERY,\n        data: _objectSpread(_objectSpread({}, data), {}, {\n          getMovies: {\n            movies: [].concat(_toConsumableArray(data.getMovies.movies), [newMovie])\n          }\n        })\n      });\n    }\n  }),\n      _useMutation2 = _slicedToArray(_useMutation, 2),\n      addMovie = _useMutation2[0],\n      addMovieData = _useMutation2[1].data;\n\n  var addMovieSubmit = function addMovieSubmit(e) {\n    e.preventDefault();\n    var form = e.target;\n    var formData = new window.FormData(form);\n    var name = formData.get(\"name\");\n    var myrate = formData.get(\"myrate\");\n    form.reset();\n    addMovie({\n      variables: {\n        name: name,\n        myrate: Number(myrate)\n      }\n    });\n  };\n\n  var sortMethodChange = function sortMethodChange(e) {\n    localStorage.setItem(\"sort\", e.target.value);\n    setSortMethod(e.target.value);\n  };\n\n  if (loading) return __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 22\n    }\n  }, \"loading\");\n\n  if (error) {\n    console.log(error);\n    return __jsx(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 10\n      }\n    }, \"error\");\n  }\n\n  if (!data) return __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 20\n    }\n  }, \"no data found\");\n  var movies = data.getMovies.movies.slice();\n\n  if (sortMethod.name.sort !== \"\") {\n    movies.sort(function (a, b) {\n      if (a.name.toLowerCase() > b.name.toLowerCase()) {\n        return sortMethod.name.sort === \"asc\" ? 1 : -1;\n      } else {\n        return sortMethod.name.sort === \"asc\" ? -1 : 1;\n      }\n    });\n  }\n\n  if (sortMethod.myrate.sort !== \"\") {\n    movies.sort(function (a, b) {\n      if (a.myrate.toLowerCase() > b.myrate.toLowerCase()) {\n        return sortMethod.myrate.sort === \"asc\" ? 1 : -1;\n      } else {\n        return sortMethod.myrate.sort === \"asc\" ? -1 : 1;\n      }\n    });\n  }\n\n  var searchFilteredMovies;\n\n  if (searchFilter !== \"\") {\n    searchFilteredMovies = movies.filter(function (movie) {\n      console.log(movie.name.toLowerCase().includes(searchFilter.toLowerCase()));\n      return movie.name.toLowerCase().includes(searchFilter.toLowerCase());\n    });\n  } else {\n    searchFilteredMovies = movies;\n  }\n\n  return __jsx(Wrapper, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 3\n    }\n  }, __jsx(\"h1\", {\n    className: \"title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 4\n    }\n  }, \"My Movies\"), __jsx(\"div\", {\n    className: \"HeadContainer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 4\n    }\n  }, __jsx(\"div\", {\n    className: \"Tools\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 5\n    }\n  }, __jsx(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 6\n    }\n  }, \"search\"), __jsx(\"div\", {\n    className: \"search\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 6\n    }\n  }, __jsx(\"input\", {\n    type: \"text\",\n    name: \"search\",\n    id: \"\",\n    value: searchFilter,\n    onChange: function onChange(e) {\n      return setSearchFilter(e.target.value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 7\n    }\n  })), __jsx(\"div\", {\n    className: \"sortMethod\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 6\n    }\n  }, __jsx(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 7\n    }\n  }, \"sort by:\"), __jsx(\"select\", {\n    name: \"myrate\",\n    defaultValue: sortMethod,\n    onChange: sortMethodChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 7\n    }\n  }, __jsx(\"option\", {\n    value: \"name\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 8\n    }\n  }, \"name\"), __jsx(\"option\", {\n    value: \"myrate\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 8\n    }\n  }, \"myrate\")))), __jsx(\"div\", {\n    className: \"FormContainer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 5\n    }\n  }, __jsx(\"h2\", {\n    className: \"formTitle\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 6\n    }\n  }, \"Add Movie\"), __jsx(\"form\", {\n    onSubmit: addMovieSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 6\n    }\n  }, __jsx(\"input\", {\n    type: \"text\",\n    name: \"name\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 7\n    }\n  }), __jsx(\"select\", {\n    name: \"myrate\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 7\n    }\n  }, __jsx(\"option\", {\n    value: 1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 8\n    }\n  }, \"bad\"), __jsx(\"option\", {\n    value: 2,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 8\n    }\n  }, \"good\"), __jsx(\"option\", {\n    value: 3,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 8\n    }\n  }, \"better\"), __jsx(\"option\", {\n    value: 4,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 8\n    }\n  }, \"oscar winning\"), __jsx(\"option\", {\n    value: 5,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 8\n    }\n  }, \"beyond oscar\")), __jsx(\"input\", {\n    type: \"submit\",\n    value: \"add\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 7\n    }\n  })))), __jsx(\"table\", {\n    className: \"Movies\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 4\n    }\n  }, __jsx(\"thead\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 5\n    }\n  }, __jsx(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 6\n    }\n  }, __jsx(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 7\n    }\n  }, \"name\"), __jsx(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 7\n    }\n  }, \"myrate\"), __jsx(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 7\n    }\n  }), __jsx(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 7\n    }\n  }), __jsx(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 7\n    }\n  }))), __jsx(\"tbody\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 5\n    }\n  }, searchFilteredMovies.map(function (movie) {\n    return __jsx(Movietable, {\n      key: movie._id,\n      details: {\n        _id: movie._id,\n        name: movie.name,\n        myrate: movie.myrate\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 7\n      }\n    });\n  }))));\n}\n\n_s(Home, \"arwW4ehjD4JD8qpjU2fIHIGz6Sk=\", false, function () {\n  return [useQuery, useMutation];\n});\n\n_c2 = Home;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"Wrapper\");\n$RefreshReg$(_c2, \"Home\");","map":{"version":3,"sources":["/Users/lucky/Documents/trial/crudList/pages/index.jsx"],"names":["styled","useState","ADD_MOVIE_MUTATION","MOVIES_QUERY","useQuery","useMutation","Movietable","Wrapper","div","Home","initialSort","name","sort","myrate","initialSearchFilter","localStorage","getItem","sortMethod","setSortMethod","searchFilter","setSearchFilter","data","error","loading","update","proxy","addMovie","newMovie","movie","readQuery","query","writeQuery","getMovies","movies","addMovieData","addMovieSubmit","e","preventDefault","form","target","formData","window","FormData","get","reset","variables","Number","sortMethodChange","setItem","value","console","log","slice","a","b","toLowerCase","searchFilteredMovies","filter","includes","map","_id"],"mappings":"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","sourcesContent":["import styled from \"styled-components\";\nimport { useState } from \"react\";\nimport { ADD_MOVIE_MUTATION } from \"../components/Mutations\";\nimport { MOVIES_QUERY } from \"../components/Query\";\nimport { useQuery, useMutation } from \"@apollo/client\";\nimport Movietable from \"../components/Movietable.jsx\";\n\nconst Wrapper = styled.div`\n\tpadding: 40px;\n\ttable {\n\t\tmin-width: 1000px;\n\t}\n\t.HeadContainer {\n\t\tdisplay: grid;\n\t\tgrid-template-columns: 1fr 1fr 3fr;\n\t\tpadding: 50px 0px;\n\t\t.FormContainer {\n\t\t\tform {\n\t\t\t\tdisplay: grid;\n\t\t\t\tgrid-template-columns: 1fr 1fr;\n\t\t\t\tgrid-gap: 20px;\n\t\t\t\tinput[type=\"submit\"] {\n\t\t\t\t\tgrid-column: 1/3;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n`;\n\nexport default function Home() {\n\tlet initialSort = { name: { sort: \"\" }, myrate: { sort: \"asc\" } };\n\tlet initialSearchFilter = \"\";\n\tif (typeof window !== \"undefined\") {\n\t\tinitialSort = localStorage.getItem(\"sort\")\n\t\t\t? localStorage.getItem(\"sort\")\n\t\t\t: initialSort;\n\t\tinitialSearchFilter = localStorage.getItem(\"search\")\n\t\t\t? localStorage.getItem(\"search\")\n\t\t\t: initialSearchFilter;\n\t}\n\tconst [sortMethod, setSortMethod] = useState(initialSort);\n\tconst [searchFilter, setSearchFilter] = useState(initialSearchFilter);\n\t//Querying the Movies\n\tconst { data, error, loading } = useQuery(MOVIES_QUERY);\n\n\t//Mutation for Adding Movie\n\tconst [addMovie, { data: addMovieData }] = useMutation(ADD_MOVIE_MUTATION, {\n\t\tupdate: (proxy, { data: { addMovie } }) => {\n\t\t\tconst newMovie = addMovie.movie;\n\t\t\tconst data = proxy.readQuery({\n\t\t\t\tquery: MOVIES_QUERY\n\t\t\t});\n\t\t\tproxy.writeQuery({\n\t\t\t\tquery: MOVIES_QUERY,\n\t\t\t\tdata: {\n\t\t\t\t\t...data,\n\t\t\t\t\tgetMovies: {\n\t\t\t\t\t\tmovies: [...data.getMovies.movies, newMovie]\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t});\n\n\tconst addMovieSubmit = e => {\n\t\te.preventDefault();\n\t\tconst form = e.target;\n\t\tconst formData = new window.FormData(form);\n\t\tconst name = formData.get(\"name\");\n\t\tconst myrate = formData.get(\"myrate\");\n\t\tform.reset();\n\t\taddMovie({ variables: { name, myrate: Number(myrate) } });\n\t};\n\n\tconst sortMethodChange = e => {\n\t\tlocalStorage.setItem(\"sort\", e.target.value);\n\t\tsetSortMethod(e.target.value);\n\t};\n\n\tif (loading) return <div>loading</div>;\n\tif (error) {\n\t\tconsole.log(error);\n\t\treturn <div>error</div>;\n\t}\n\tif (!data) return <div>no data found</div>;\n\tconst movies = data.getMovies.movies.slice();\n\tif (sortMethod.name.sort !== \"\") {\n\t\tmovies.sort((a, b) => {\n\t\t\tif (a.name.toLowerCase() > b.name.toLowerCase()) {\n\t\t\t\treturn sortMethod.name.sort === \"asc\" ? 1 : -1;\n\t\t\t} else {\n\t\t\t\treturn sortMethod.name.sort === \"asc\" ? -1 : 1;\n\t\t\t}\n\t\t});\n\t}\n\tif (sortMethod.myrate.sort !== \"\") {\n\t\tmovies.sort((a, b) => {\n\t\t\tif (a.myrate.toLowerCase() > b.myrate.toLowerCase()) {\n\t\t\t\treturn sortMethod.myrate.sort === \"asc\" ? 1 : -1;\n\t\t\t} else {\n\t\t\t\treturn sortMethod.myrate.sort === \"asc\" ? -1 : 1;\n\t\t\t}\n\t\t});\n\t}\n\n\tlet searchFilteredMovies;\n\tif (searchFilter !== \"\") {\n\t\tsearchFilteredMovies = movies.filter(movie => {\n\t\t\tconsole.log(\n\t\t\t\tmovie.name.toLowerCase().includes(searchFilter.toLowerCase())\n\t\t\t);\n\t\t\treturn movie.name.toLowerCase().includes(searchFilter.toLowerCase());\n\t\t});\n\t} else {\n\t\tsearchFilteredMovies = movies;\n\t}\n\treturn (\n\t\t<Wrapper>\n\t\t\t<h1 className=\"title\">My Movies</h1>\n\t\t\t<div className=\"HeadContainer\">\n\t\t\t\t<div className=\"Tools\">\n\t\t\t\t\t<h3>search</h3>\n\t\t\t\t\t<div className=\"search\">\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\tname=\"search\"\n\t\t\t\t\t\t\tid=\"\"\n\t\t\t\t\t\t\tvalue={searchFilter}\n\t\t\t\t\t\t\tonChange={e => setSearchFilter(e.target.value)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"sortMethod\">\n\t\t\t\t\t\t<h3>sort by:</h3>\n\t\t\t\t\t\t<select\n\t\t\t\t\t\t\tname=\"myrate\"\n\t\t\t\t\t\t\tdefaultValue={sortMethod}\n\t\t\t\t\t\t\tonChange={sortMethodChange}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<option value=\"name\">name</option>\n\t\t\t\t\t\t\t<option value=\"myrate\">myrate</option>\n\t\t\t\t\t\t</select>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"FormContainer\">\n\t\t\t\t\t<h2 className=\"formTitle\">Add Movie</h2>\n\t\t\t\t\t<form onSubmit={addMovieSubmit}>\n\t\t\t\t\t\t<input type=\"text\" name=\"name\" />\n\t\t\t\t\t\t<select name=\"myrate\">\n\t\t\t\t\t\t\t<option value={1}>bad</option>\n\t\t\t\t\t\t\t<option value={2}>good</option>\n\t\t\t\t\t\t\t<option value={3}>better</option>\n\t\t\t\t\t\t\t<option value={4}>oscar winning</option>\n\t\t\t\t\t\t\t<option value={5}>beyond oscar</option>\n\t\t\t\t\t\t</select>\n\t\t\t\t\t\t<input type=\"submit\" value=\"add\" />\n\t\t\t\t\t</form>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<table className=\"Movies\">\n\t\t\t\t<thead>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<th>name</th>\n\t\t\t\t\t\t<th>myrate</th>\n\t\t\t\t\t\t<th></th>\n\t\t\t\t\t\t<th></th>\n\t\t\t\t\t\t<th></th>\n\t\t\t\t\t</tr>\n\t\t\t\t</thead>\n\t\t\t\t<tbody>\n\t\t\t\t\t{searchFilteredMovies.map(movie => (\n\t\t\t\t\t\t<Movietable\n\t\t\t\t\t\t\tkey={movie._id}\n\t\t\t\t\t\t\tdetails={{\n\t\t\t\t\t\t\t\t_id: movie._id,\n\t\t\t\t\t\t\t\tname: movie.name,\n\t\t\t\t\t\t\t\tmyrate: movie.myrate\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t))}\n\t\t\t\t</tbody>\n\t\t\t</table>\n\t\t</Wrapper>\n\t);\n}\n"]},"metadata":{},"sourceType":"module"}