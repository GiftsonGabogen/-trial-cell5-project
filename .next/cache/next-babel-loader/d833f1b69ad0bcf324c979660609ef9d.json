{"ast":null,"code":"var _jsxFileName = \"/Users/lucky/Documents/trial/crudList/pages/index.tsx\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport styled from \"styled-components\";\nimport * as React from \"react\";\nimport { useState } from \"react\";\nimport { ADD_MOVIE_MUTATION } from \"../components/Mutations\";\nimport { MOVIES_QUERY } from \"../components/Query\";\nimport { useQuery, useMutation } from \"@apollo/client\";\nimport Movietable from \"../components/Movietable\";\nimport sorter from \"../components/tools/sorter\";\nconst Wrapper = styled.div.withConfig({\n  displayName: \"pages__Wrapper\",\n  componentId: \"q07zwm-0\"\n})([\"padding:40px;small.sortIndicator{transform:rotateX(90deg);&.primary{color:red;}}table{min-width:1000px;th.attribute{cursor:pointer;}}.HeadContainer{display:grid;grid-template-columns:1fr 1fr 3fr;padding:50px 0px;.FormContainer{form{display:grid;grid-template-columns:1fr 1fr;grid-gap:20px;input[type=\\\"submit\\\"]{grid-column:1/3;}}}}\"]);\n\nconst Home = () => {\n  let initialSort = {\n    name: {\n      sort: \"\"\n    },\n    myrate: {\n      sort: \"\"\n    }\n  };\n  let initialSearchFilter = \"\";\n  const {\n    0: sortMethod,\n    1: setSortMethod\n  } = useState(initialSort);\n  const {\n    0: sortPriority,\n    1: setSortPriority\n  } = useState(\"\");\n  const {\n    0: searchFilter,\n    1: setSearchFilter\n  } = useState(initialSearchFilter); //Querying the Movies\n\n  const {\n    data,\n    error,\n    loading\n  } = useQuery(MOVIES_QUERY); //Mutation for Adding Movie\n\n  const [addMovie, {\n    data: addMovieData\n  }] = useMutation(ADD_MOVIE_MUTATION, {\n    update: (proxy, {\n      data: {\n        addMovie\n      }\n    }) => {\n      const newMovie = addMovie.movie;\n      const data = proxy.readQuery({\n        query: MOVIES_QUERY\n      });\n      proxy.writeQuery({\n        query: MOVIES_QUERY,\n        data: _objectSpread(_objectSpread({}, data), {}, {\n          getMovies: {\n            movies: [...data.getMovies.movies, newMovie]\n          }\n        })\n      });\n    }\n  });\n\n  const addMovieSubmit = e => {\n    e.preventDefault();\n    const form = e.target;\n    const formData = new window.FormData(form);\n    const name = formData.get(\"name\");\n    const myrate = formData.get(\"myrate\");\n    form.reset();\n    addMovie({\n      variables: {\n        name,\n        myrate: Number(myrate)\n      }\n    });\n  };\n\n  const nameClicked = () => {\n    let name = \"\";\n\n    if (sortMethod.name.sort === \"\") {\n      name = \"asc\";\n    } else if (sortMethod.name.sort === \"asc\") {\n      name = \"desc\";\n    }\n\n    setSortMethod(prevSortMethod => {\n      return _objectSpread(_objectSpread({}, prevSortMethod), {}, {\n        name: {\n          sort: name\n        }\n      });\n    });\n\n    if (sortMethod.myrate.sort !== \"\") {\n      setSortPriority(\"name\");\n    }\n\n    if (name === \"\") {\n      setSortPriority(\"\");\n    }\n  };\n\n  const myrateClicked = () => {\n    let myrate = \"\";\n\n    if (sortMethod.myrate.sort === \"\") {\n      myrate = \"asc\";\n    } else if (sortMethod.myrate.sort === \"asc\") {\n      myrate = \"desc\";\n    }\n\n    setSortMethod(prevSortMethod => {\n      return _objectSpread(_objectSpread({}, prevSortMethod), {}, {\n        myrate: {\n          sort: myrate\n        }\n      });\n    });\n\n    if (sortMethod.name.sort !== \"\") {\n      setSortPriority(\"myrate\");\n    }\n\n    if (myrate === \"\") {\n      setSortPriority(\"\");\n    }\n  };\n\n  if (loading) return __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 22\n    }\n  }, \"loading\");\n\n  if (error) {\n    console.log(error);\n    return __jsx(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 10\n      }\n    }, \"error\");\n  }\n\n  if (!data) return __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 20\n    }\n  }, \"no data found\");\n  const movies = data.getMovies.movies.slice();\n  const sortedMovies = sorter({\n    sortMethod,\n    movies,\n    sortPriority\n  });\n  let searchFilteredMovies;\n\n  if (searchFilter !== \"\") {\n    searchFilteredMovies = sortedMovies.filter(movie => {\n      return movie.name.toLowerCase().includes(searchFilter.toLowerCase());\n    });\n  } else {\n    searchFilteredMovies = sortedMovies;\n  }\n\n  return __jsx(Wrapper, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 3\n    }\n  }, __jsx(\"h1\", {\n    className: \"title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 4\n    }\n  }, \"My Movies\"), __jsx(\"div\", {\n    className: \"HeadContainer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 4\n    }\n  }, __jsx(\"div\", {\n    className: \"Tools\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 5\n    }\n  }, __jsx(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 6\n    }\n  }, \"search\"), __jsx(\"div\", {\n    className: \"search\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 6\n    }\n  }, __jsx(\"input\", {\n    type: \"text\",\n    name: \"search\",\n    id: \"\",\n    value: searchFilter,\n    onChange: e => setSearchFilter(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 7\n    }\n  }))), __jsx(\"div\", {\n    className: \"FormContainer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 5\n    }\n  }, __jsx(\"h2\", {\n    className: \"formTitle\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 6\n    }\n  }, \"Add Movie\"), __jsx(\"form\", {\n    onSubmit: addMovieSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 6\n    }\n  }, __jsx(\"input\", {\n    type: \"text\",\n    name: \"name\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 7\n    }\n  }), __jsx(\"select\", {\n    name: \"myrate\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 7\n    }\n  }, __jsx(\"option\", {\n    value: 1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 8\n    }\n  }, \"bad\"), __jsx(\"option\", {\n    value: 2,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 8\n    }\n  }, \"good\"), __jsx(\"option\", {\n    value: 3,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 8\n    }\n  }, \"better\"), __jsx(\"option\", {\n    value: 4,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 8\n    }\n  }, \"oscar winning\"), __jsx(\"option\", {\n    value: 5,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 8\n    }\n  }, \"beyond oscar\")), __jsx(\"input\", {\n    type: \"submit\",\n    value: \"add\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 7\n    }\n  })))), __jsx(\"table\", {\n    className: \"Movies\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 4\n    }\n  }, __jsx(\"thead\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 5\n    }\n  }, __jsx(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 6\n    }\n  }, __jsx(\"th\", {\n    onClick: nameClicked,\n    className: \"attribute\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 7\n    }\n  }, \"name\", \" \", __jsx(\"small\", {\n    className: `sortIndicator ${sortPriority === \"name\" ? \"primary\" : \"\"}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 8\n    }\n  }, sortMethod.name.sort !== \"\" ? sortMethod.name.sort === \"asc\" ? \"asc\" : \"desc\" : \"\")), __jsx(\"th\", {\n    onClick: myrateClicked,\n    className: \"attribute\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 7\n    }\n  }, \"myrate\", \" \", __jsx(\"small\", {\n    className: `sortIndicator ${sortPriority === \"myrate\" ? \"primary\" : \"\"}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 8\n    }\n  }, sortMethod.myrate.sort !== \"\" ? sortMethod.myrate.sort === \"asc\" ? \"asc\" : \"desc\" : \"\")), __jsx(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 224,\n      columnNumber: 7\n    }\n  }), __jsx(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 7\n    }\n  }), __jsx(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 7\n    }\n  }))), __jsx(\"tbody\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 229,\n      columnNumber: 5\n    }\n  }, searchFilteredMovies.map(movie => __jsx(Movietable, {\n    key: movie._id,\n    details: {\n      _id: movie._id,\n      name: movie.name,\n      myrate: movie.myrate\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 231,\n      columnNumber: 7\n    }\n  })))));\n};\n\nexport default Home;\n{\n  /* <div className=\"sortMethod\">\n  \t\t\t\t\t<h3>sort by:</h3>\n  \t\t\t\t\t<select\n  \t\t\t\t\t\tname=\"myrate\"\n  \t\t\t\t\t\tdefaultValue={sortMethod}\n  \t\t\t\t\t\tonChange={sortMethodChange}\n  \t\t\t\t\t>\n  \t\t\t\t\t\t<option value=\"name\">name</option>\n  \t\t\t\t\t\t<option value=\"myrate\">myrate</option>\n  \t\t\t\t\t</select>\n  \t\t\t\t</div> */\n}","map":{"version":3,"sources":["/Users/lucky/Documents/trial/crudList/pages/index.tsx"],"names":["styled","React","useState","ADD_MOVIE_MUTATION","MOVIES_QUERY","useQuery","useMutation","Movietable","sorter","Wrapper","div","Home","initialSort","name","sort","myrate","initialSearchFilter","sortMethod","setSortMethod","sortPriority","setSortPriority","searchFilter","setSearchFilter","data","error","loading","addMovie","addMovieData","update","proxy","newMovie","movie","readQuery","query","writeQuery","getMovies","movies","addMovieSubmit","e","preventDefault","form","target","formData","window","FormData","get","reset","variables","Number","nameClicked","prevSortMethod","myrateClicked","console","log","slice","sortedMovies","searchFilteredMovies","filter","toLowerCase","includes","value","map","_id"],"mappings":"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","sourcesContent":["import styled from \"styled-components\";\nimport * as React from \"react\";\nimport { useState } from \"react\";\nimport { ADD_MOVIE_MUTATION } from \"../components/Mutations\";\nimport { MOVIES_QUERY } from \"../components/Query\";\nimport {\n\tuseQuery,\n\tuseMutation,\n\tDocumentNode,\n\tBaseMutationOptions\n} from \"@apollo/client\";\nimport Movietable from \"../components/Movietable\";\nimport sorter from \"../components/tools/sorter\";\n\nconst Wrapper = styled.div`\n\tpadding: 40px;\n\tsmall.sortIndicator {\n\t\ttransform: rotateX(90deg);\n\t\t&.primary {\n\t\t\tcolor: red;\n\t\t}\n\t}\n\ttable {\n\t\tmin-width: 1000px;\n\t\tth.attribute {\n\t\t\tcursor: pointer;\n\t\t}\n\t}\n\t.HeadContainer {\n\t\tdisplay: grid;\n\t\tgrid-template-columns: 1fr 1fr 3fr;\n\t\tpadding: 50px 0px;\n\t\t.FormContainer {\n\t\t\tform {\n\t\t\t\tdisplay: grid;\n\t\t\t\tgrid-template-columns: 1fr 1fr;\n\t\t\t\tgrid-gap: 20px;\n\t\t\t\tinput[type=\"submit\"] {\n\t\t\t\t\tgrid-column: 1/3;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n`;\n\nexport interface ISortMethod {\n\tname: { sort: string };\n\tmyrate: { sort: string };\n}\n\nexport interface IMovie {\n\t_id: string;\n\tname: string;\n\tmyrate: number;\n}\n\nconst Home: React.FC = () => {\n\tlet initialSort = { name: { sort: \"\" }, myrate: { sort: \"\" } };\n\tlet initialSearchFilter = \"\";\n\n\tconst [sortMethod, setSortMethod] = useState<ISortMethod>(initialSort);\n\tconst [sortPriority, setSortPriority] = useState<string>(\"\");\n\tconst [searchFilter, setSearchFilter] = useState<string>(initialSearchFilter);\n\n\t//Querying the Movies\n\tconst { data, error, loading } = useQuery(MOVIES_QUERY);\n\n\t//Mutation for Adding Movie\n\tconst [addMovie, { data: addMovieData }] = useMutation(ADD_MOVIE_MUTATION, {\n\t\tupdate: (proxy, { data: { addMovie } }) => {\n\t\t\tconst newMovie = addMovie.movie;\n\t\t\tconst data: { getMovies: { movies: IMovie[] } } = proxy.readQuery({\n\t\t\t\tquery: MOVIES_QUERY\n\t\t\t});\n\t\t\tproxy.writeQuery({\n\t\t\t\tquery: MOVIES_QUERY,\n\t\t\t\tdata: {\n\t\t\t\t\t...data,\n\t\t\t\t\tgetMovies: {\n\t\t\t\t\t\tmovies: [...data.getMovies.movies, newMovie]\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t});\n\n\tconst addMovieSubmit = e => {\n\t\te.preventDefault();\n\t\tconst form = e.target;\n\t\tconst formData = new window.FormData(form);\n\t\tconst name = formData.get(\"name\");\n\t\tconst myrate = formData.get(\"myrate\");\n\t\tform.reset();\n\t\taddMovie({ variables: { name, myrate: Number(myrate) } });\n\t};\n\n\tconst nameClicked = () => {\n\t\tlet name = \"\";\n\t\tif (sortMethod.name.sort === \"\") {\n\t\t\tname = \"asc\";\n\t\t} else if (sortMethod.name.sort === \"asc\") {\n\t\t\tname = \"desc\";\n\t\t}\n\t\tsetSortMethod(prevSortMethod => {\n\t\t\treturn {\n\t\t\t\t...prevSortMethod,\n\t\t\t\tname: { sort: name }\n\t\t\t};\n\t\t});\n\t\tif (sortMethod.myrate.sort !== \"\") {\n\t\t\tsetSortPriority(\"name\");\n\t\t}\n\t\tif (name === \"\") {\n\t\t\tsetSortPriority(\"\");\n\t\t}\n\t};\n\n\tconst myrateClicked = () => {\n\t\tlet myrate = \"\";\n\t\tif (sortMethod.myrate.sort === \"\") {\n\t\t\tmyrate = \"asc\";\n\t\t} else if (sortMethod.myrate.sort === \"asc\") {\n\t\t\tmyrate = \"desc\";\n\t\t}\n\t\tsetSortMethod(prevSortMethod => {\n\t\t\treturn {\n\t\t\t\t...prevSortMethod,\n\t\t\t\tmyrate: { sort: myrate }\n\t\t\t};\n\t\t});\n\t\tif (sortMethod.name.sort !== \"\") {\n\t\t\tsetSortPriority(\"myrate\");\n\t\t}\n\t\tif (myrate === \"\") {\n\t\t\tsetSortPriority(\"\");\n\t\t}\n\t};\n\tif (loading) return <div>loading</div>;\n\tif (error) {\n\t\tconsole.log(error);\n\t\treturn <div>error</div>;\n\t}\n\tif (!data) return <div>no data found</div>;\n\tconst movies = data.getMovies.movies.slice();\n\tconst sortedMovies = sorter({ sortMethod, movies, sortPriority });\n\n\tlet searchFilteredMovies: IMovie[];\n\tif (searchFilter !== \"\") {\n\t\tsearchFilteredMovies = sortedMovies.filter(movie => {\n\t\t\treturn movie.name.toLowerCase().includes(searchFilter.toLowerCase());\n\t\t});\n\t} else {\n\t\tsearchFilteredMovies = sortedMovies;\n\t}\n\treturn (\n\t\t<Wrapper>\n\t\t\t<h1 className=\"title\">My Movies</h1>\n\t\t\t<div className=\"HeadContainer\">\n\t\t\t\t<div className=\"Tools\">\n\t\t\t\t\t<h3>search</h3>\n\t\t\t\t\t<div className=\"search\">\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\tname=\"search\"\n\t\t\t\t\t\t\tid=\"\"\n\t\t\t\t\t\t\tvalue={searchFilter}\n\t\t\t\t\t\t\tonChange={e => setSearchFilter(e.target.value)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"FormContainer\">\n\t\t\t\t\t<h2 className=\"formTitle\">Add Movie</h2>\n\t\t\t\t\t<form onSubmit={addMovieSubmit}>\n\t\t\t\t\t\t<input type=\"text\" name=\"name\" />\n\t\t\t\t\t\t<select name=\"myrate\">\n\t\t\t\t\t\t\t<option value={1}>bad</option>\n\t\t\t\t\t\t\t<option value={2}>good</option>\n\t\t\t\t\t\t\t<option value={3}>better</option>\n\t\t\t\t\t\t\t<option value={4}>oscar winning</option>\n\t\t\t\t\t\t\t<option value={5}>beyond oscar</option>\n\t\t\t\t\t\t</select>\n\t\t\t\t\t\t<input type=\"submit\" value=\"add\" />\n\t\t\t\t\t</form>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<table className=\"Movies\">\n\t\t\t\t<thead>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t{/* nested if else below is for the sorting indicator\n                if the color of the indicator is primary or red\n                it means the sortMethod first sort first the primary before the second sorting\n                example:\n                if name sorting indicator color is red the movies is\n                sorted name first then myrate last\n            */}\n\t\t\t\t\t\t<th onClick={nameClicked} className=\"attribute\">\n\t\t\t\t\t\t\tname{\" \"}\n\t\t\t\t\t\t\t<small\n\t\t\t\t\t\t\t\tclassName={`sortIndicator ${\n\t\t\t\t\t\t\t\t\tsortPriority === \"name\" ? \"primary\" : \"\"\n\t\t\t\t\t\t\t\t}`}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{sortMethod.name.sort !== \"\"\n\t\t\t\t\t\t\t\t\t? sortMethod.name.sort === \"asc\"\n\t\t\t\t\t\t\t\t\t\t? \"asc\"\n\t\t\t\t\t\t\t\t\t\t: \"desc\"\n\t\t\t\t\t\t\t\t\t: \"\"}\n\t\t\t\t\t\t\t</small>\n\t\t\t\t\t\t</th>\n\t\t\t\t\t\t<th onClick={myrateClicked} className=\"attribute\">\n\t\t\t\t\t\t\tmyrate{\" \"}\n\t\t\t\t\t\t\t<small\n\t\t\t\t\t\t\t\tclassName={`sortIndicator ${\n\t\t\t\t\t\t\t\t\tsortPriority === \"myrate\" ? \"primary\" : \"\"\n\t\t\t\t\t\t\t\t}`}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{sortMethod.myrate.sort !== \"\"\n\t\t\t\t\t\t\t\t\t? sortMethod.myrate.sort === \"asc\"\n\t\t\t\t\t\t\t\t\t\t? \"asc\"\n\t\t\t\t\t\t\t\t\t\t: \"desc\"\n\t\t\t\t\t\t\t\t\t: \"\"}\n\t\t\t\t\t\t\t</small>\n\t\t\t\t\t\t</th>\n\t\t\t\t\t\t<th></th>\n\t\t\t\t\t\t<th></th>\n\t\t\t\t\t\t<th></th>\n\t\t\t\t\t</tr>\n\t\t\t\t</thead>\n\t\t\t\t<tbody>\n\t\t\t\t\t{searchFilteredMovies.map(movie => (\n\t\t\t\t\t\t<Movietable\n\t\t\t\t\t\t\tkey={movie._id}\n\t\t\t\t\t\t\tdetails={{\n\t\t\t\t\t\t\t\t_id: movie._id,\n\t\t\t\t\t\t\t\tname: movie.name,\n\t\t\t\t\t\t\t\tmyrate: movie.myrate\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t))}\n\t\t\t\t</tbody>\n\t\t\t</table>\n\t\t</Wrapper>\n\t);\n};\n\nexport default Home;\n\n{\n\t/* <div className=\"sortMethod\">\n\t\t\t\t\t\t<h3>sort by:</h3>\n\t\t\t\t\t\t<select\n\t\t\t\t\t\t\tname=\"myrate\"\n\t\t\t\t\t\t\tdefaultValue={sortMethod}\n\t\t\t\t\t\t\tonChange={sortMethodChange}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<option value=\"name\">name</option>\n\t\t\t\t\t\t\t<option value=\"myrate\">myrate</option>\n\t\t\t\t\t\t</select>\n\t\t\t\t\t</div> */\n}\n"]},"metadata":{},"sourceType":"module"}