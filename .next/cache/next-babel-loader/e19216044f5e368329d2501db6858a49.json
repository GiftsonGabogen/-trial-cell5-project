{"ast":null,"code":"var _jsxFileName = \"/Users/lucky/Documents/trial/crudList/components/Movietable.jsx\";\nimport React from \"react\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport styled from \"styled-components\";\nimport { useRef, useState } from \"react\";\nimport { UPDATE_MOVIE_MUTATION, DELETE_MOVIE_MUTATION } from \"./Mutations\";\nimport { MOVIES_QUERY } from \"./Query\";\nimport Link from \"next/link\";\nimport { useMutation } from \"@apollo/client\";\nconst Wrapper = styled.tr.withConfig({\n  displayName: \"Movietable__Wrapper\",\n  componentId: \"sc-1v7elz6-0\"\n})([\"border-bottom:1px solid gray;&.Outline{outline:red solid 1px;}min-width:500px;td{padding:20px;}button{color:white;border:none;padding:10px 15px;cursor:pointer;&.delete{background-color:red;}&.edit{background-color:blue;}&.done{background-color:green;visibility:hidden;transition:200ms;&.Show{visibility:visible;}}}\"]);\n\nconst MyrateConverter = value => {\n  switch (value) {\n    case 1:\n      return \"bad\";\n\n    case 2:\n      return \"good\";\n\n    case 3:\n      return \"better\";\n\n    case 4:\n      return \"oscar\";\n\n    case 5:\n      return \"beyond oscar\";\n\n    default:\n      return \"beginner\";\n  }\n};\n\nconst Movie = ({\n  details: {\n    _id,\n    name,\n    myrate\n  }\n}) => {\n  const [updateMovie] = useMutation(UPDATE_MOVIE_MUTATION);\n  const [deleteMovie] = useMutation(DELETE_MOVIE_MUTATION, {\n    update: (proxy, {\n      data: {\n        deleteMovie\n      }\n    }) => {\n      const removedMovie = deleteMovie.movie;\n      const data = proxy.readQuery({\n        query: MOVIES_QUERY\n      });\n      proxy.writeQuery({\n        query: MOVIES_QUERY,\n        data: _objectSpread(_objectSpread({}, data), {}, {\n          getMovies: {\n            movies: data.getMovies.movies.filter(movie => movie._id !== removedMovie._id)\n          }\n        })\n      });\n    }\n  });\n  const {\n    0: editing,\n    1: setEditing\n  } = useState(false);\n  const WrapperRef = useRef(null);\n  const nameRef = useRef(null);\n  const myrateRef = useRef(null);\n  const inputNameRef = useRef(null);\n  const inputMyrateRef = useRef(null);\n  const doneButtonRef = useRef(null);\n\n  const edit = () => {\n    WrapperRef.current.classList.add(\"Outline\");\n    doneButtonRef.current.classList.add(\"Show\");\n    setEditing(true);\n  };\n\n  const deleteSubmit = () => {\n    deleteMovie({\n      variables: {\n        _id: _id\n      }\n    });\n  };\n\n  const doneSubmit = () => {\n    WrapperRef.current.classList.remove(\"Outline\");\n    doneButtonRef.current.classList.remove(\"Show\");\n    const variables = {\n      _id,\n      name: inputNameRef.current.value,\n      myrate: Number(inputMyrateRef.current.value)\n    };\n    setEditing(false);\n    updateMovie({\n      variables\n    });\n  };\n\n  return __jsx(Wrapper, {\n    ref: WrapperRef,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 3\n    }\n  }, __jsx(\"td\", {\n    className: \"name\",\n    ref: nameRef,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 4\n    }\n  }, editing ? __jsx(\"input\", {\n    type: \"text\",\n    ref: inputNameRef,\n    name: \"name\",\n    defaultValue: name,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 6\n    }\n  }) : __jsx(\"a\", {\n    href: `/${_id}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 6\n    }\n  }, name)), __jsx(\"td\", {\n    className: \"myrate\",\n    ref: myrateRef,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 4\n    }\n  }, editing ? __jsx(\"select\", {\n    name: \"myrate\",\n    ref: inputMyrateRef,\n    defaultValue: myrate,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 6\n    }\n  }, __jsx(\"option\", {\n    value: 1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 7\n    }\n  }, \"bad\"), __jsx(\"option\", {\n    value: 2,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 7\n    }\n  }, \"good\"), __jsx(\"option\", {\n    value: 3,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 7\n    }\n  }, \"better\"), __jsx(\"option\", {\n    value: 4,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 7\n    }\n  }, \"oscar winning\"), __jsx(\"option\", {\n    value: 5,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 7\n    }\n  }, \"beyond oscar\")) : MyrateConverter(myrate)), __jsx(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 4\n    }\n  }, __jsx(\"button\", {\n    className: \"edit\",\n    onClick: edit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 5\n    }\n  }, \"edit\")), __jsx(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 4\n    }\n  }, __jsx(\"button\", {\n    className: \"delete\",\n    onClick: deleteSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 5\n    }\n  }, \"delete\")), __jsx(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 4\n    }\n  }, __jsx(\"button\", {\n    className: \"done\",\n    onClick: doneSubmit,\n    ref: doneButtonRef,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 5\n    }\n  }, \"done\")));\n};\n\nexport default Movie;","map":{"version":3,"sources":["/Users/lucky/Documents/trial/crudList/components/Movietable.jsx"],"names":["styled","useRef","useState","UPDATE_MOVIE_MUTATION","DELETE_MOVIE_MUTATION","MOVIES_QUERY","Link","useMutation","Wrapper","tr","MyrateConverter","value","Movie","details","_id","name","myrate","updateMovie","deleteMovie","update","proxy","data","removedMovie","movie","readQuery","query","writeQuery","getMovies","movies","filter","editing","setEditing","WrapperRef","nameRef","myrateRef","inputNameRef","inputMyrateRef","doneButtonRef","edit","current","classList","add","deleteSubmit","variables","doneSubmit","remove","Number"],"mappings":";;;;;;;;;;AAAA,OAAOA,MAAP,MAAmB,mBAAnB;AACA,SAASC,MAAT,EAAiBC,QAAjB,QAAiC,OAAjC;AACA,SAASC,qBAAT,EAAgCC,qBAAhC,QAA6D,aAA7D;AACA,SAASC,YAAT,QAA6B,SAA7B;AACA,OAAOC,IAAP,MAAiB,WAAjB;AACA,SAASC,WAAT,QAA4B,gBAA5B;AAEA,MAAMC,OAAO,GAAGR,MAAM,CAACS,EAAV;AAAA;AAAA;AAAA,kUAAb;;AA+BA,MAAMC,eAAe,GAAGC,KAAK,IAAI;AAChC,UAAQA,KAAR;AACC,SAAK,CAAL;AACC,aAAO,KAAP;;AACD,SAAK,CAAL;AACC,aAAO,MAAP;;AACD,SAAK,CAAL;AACC,aAAO,QAAP;;AACD,SAAK,CAAL;AACC,aAAO,OAAP;;AACD,SAAK,CAAL;AACC,aAAO,cAAP;;AACD;AACC,aAAO,UAAP;AAZF;AAcA,CAfD;;AAiBA,MAAMC,KAAK,GAAG,CAAC;AAAEC,EAAAA,OAAO,EAAE;AAAEC,IAAAA,GAAF;AAAOC,IAAAA,IAAP;AAAaC,IAAAA;AAAb;AAAX,CAAD,KAAwC;AACrD,QAAM,CAACC,WAAD,IAAgBV,WAAW,CAACJ,qBAAD,CAAjC;AACA,QAAM,CAACe,WAAD,IAAgBX,WAAW,CAACH,qBAAD,EAAwB;AACxDe,IAAAA,MAAM,EAAE,CAACC,KAAD,EAAQ;AAAEC,MAAAA,IAAI,EAAE;AAAEH,QAAAA;AAAF;AAAR,KAAR,KAAsC;AAC7C,YAAMI,YAAY,GAAGJ,WAAW,CAACK,KAAjC;AACA,YAAMF,IAAI,GAAGD,KAAK,CAACI,SAAN,CAAgB;AAC5BC,QAAAA,KAAK,EAAEpB;AADqB,OAAhB,CAAb;AAGAe,MAAAA,KAAK,CAACM,UAAN,CAAiB;AAChBD,QAAAA,KAAK,EAAEpB,YADS;AAEhBgB,QAAAA,IAAI,kCACAA,IADA;AAEHM,UAAAA,SAAS,EAAE;AACVC,YAAAA,MAAM,EAAEP,IAAI,CAACM,SAAL,CAAeC,MAAf,CAAsBC,MAAtB,CACPN,KAAK,IAAIA,KAAK,CAACT,GAAN,KAAcQ,YAAY,CAACR,GAD7B;AADE;AAFR;AAFY,OAAjB;AAWA;AAjBuD,GAAxB,CAAjC;AAmBA,QAAM;AAAA,OAACgB,OAAD;AAAA,OAAUC;AAAV,MAAwB7B,QAAQ,CAAC,KAAD,CAAtC;AACA,QAAM8B,UAAU,GAAG/B,MAAM,CAAC,IAAD,CAAzB;AACA,QAAMgC,OAAO,GAAGhC,MAAM,CAAC,IAAD,CAAtB;AACA,QAAMiC,SAAS,GAAGjC,MAAM,CAAC,IAAD,CAAxB;AACA,QAAMkC,YAAY,GAAGlC,MAAM,CAAC,IAAD,CAA3B;AACA,QAAMmC,cAAc,GAAGnC,MAAM,CAAC,IAAD,CAA7B;AACA,QAAMoC,aAAa,GAAGpC,MAAM,CAAC,IAAD,CAA5B;;AACA,QAAMqC,IAAI,GAAG,MAAM;AAClBN,IAAAA,UAAU,CAACO,OAAX,CAAmBC,SAAnB,CAA6BC,GAA7B,CAAiC,SAAjC;AACAJ,IAAAA,aAAa,CAACE,OAAd,CAAsBC,SAAtB,CAAgCC,GAAhC,CAAoC,MAApC;AACAV,IAAAA,UAAU,CAAC,IAAD,CAAV;AACA,GAJD;;AAMA,QAAMW,YAAY,GAAG,MAAM;AAC1BxB,IAAAA,WAAW,CAAC;AAAEyB,MAAAA,SAAS,EAAE;AAAE7B,QAAAA,GAAG,EAAEA;AAAP;AAAb,KAAD,CAAX;AACA,GAFD;;AAIA,QAAM8B,UAAU,GAAG,MAAM;AACxBZ,IAAAA,UAAU,CAACO,OAAX,CAAmBC,SAAnB,CAA6BK,MAA7B,CAAoC,SAApC;AACAR,IAAAA,aAAa,CAACE,OAAd,CAAsBC,SAAtB,CAAgCK,MAAhC,CAAuC,MAAvC;AACA,UAAMF,SAAS,GAAG;AACjB7B,MAAAA,GADiB;AAEjBC,MAAAA,IAAI,EAAEoB,YAAY,CAACI,OAAb,CAAqB5B,KAFV;AAGjBK,MAAAA,MAAM,EAAE8B,MAAM,CAACV,cAAc,CAACG,OAAf,CAAuB5B,KAAxB;AAHG,KAAlB;AAKAoB,IAAAA,UAAU,CAAC,KAAD,CAAV;AACAd,IAAAA,WAAW,CAAC;AAAE0B,MAAAA;AAAF,KAAD,CAAX;AACA,GAVD;;AAWA,SACC,MAAC,OAAD;AAAS,IAAA,GAAG,EAAEX,UAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACC;AAAI,IAAA,SAAS,EAAC,MAAd;AAAqB,IAAA,GAAG,EAAEC,OAA1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACEH,OAAO,GACP;AACC,IAAA,IAAI,EAAC,MADN;AAEC,IAAA,GAAG,EAAEK,YAFN;AAGC,IAAA,IAAI,EAAC,MAHN;AAIC,IAAA,YAAY,EAAEpB,IAJf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADO,GAQP;AAAG,IAAA,IAAI,EAAG,IAAGD,GAAI,EAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAqBC,IAArB,CATF,CADD,EAaC;AAAI,IAAA,SAAS,EAAC,QAAd;AAAuB,IAAA,GAAG,EAAEmB,SAA5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACEJ,OAAO,GACP;AAAQ,IAAA,IAAI,EAAC,QAAb;AAAsB,IAAA,GAAG,EAAEM,cAA3B;AAA2C,IAAA,YAAY,EAAEpB,MAAzD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACC;AAAQ,IAAA,KAAK,EAAE,CAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WADD,EAEC;AAAQ,IAAA,KAAK,EAAE,CAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAFD,EAGC;AAAQ,IAAA,KAAK,EAAE,CAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAHD,EAIC;AAAQ,IAAA,KAAK,EAAE,CAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAJD,EAKC;AAAQ,IAAA,KAAK,EAAE,CAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBALD,CADO,GASPN,eAAe,CAACM,MAAD,CAVjB,CAbD,EA0BC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACC;AAAQ,IAAA,SAAS,EAAC,MAAlB;AAAyB,IAAA,OAAO,EAAEsB,IAAlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YADD,CA1BD,EA+BC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACC;AAAQ,IAAA,SAAS,EAAC,QAAlB;AAA2B,IAAA,OAAO,EAAEI,YAApC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADD,CA/BD,EAqCC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACC;AAAQ,IAAA,SAAS,EAAC,MAAlB;AAAyB,IAAA,OAAO,EAAEE,UAAlC;AAA8C,IAAA,GAAG,EAAEP,aAAnD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YADD,CArCD,CADD;AA6CA,CA9FD;;AAgGA,eAAezB,KAAf","sourcesContent":["import styled from \"styled-components\";\nimport { useRef, useState } from \"react\";\nimport { UPDATE_MOVIE_MUTATION, DELETE_MOVIE_MUTATION } from \"./Mutations\";\nimport { MOVIES_QUERY } from \"./Query\";\nimport Link from \"next/link\";\nimport { useMutation } from \"@apollo/client\";\n\nconst Wrapper = styled.tr`\n\tborder-bottom: 1px solid gray;\n\t&.Outline {\n\t\toutline: red solid 1px;\n\t}\n\tmin-width: 500px;\n\ttd {\n\t\tpadding: 20px;\n\t}\n\tbutton {\n\t\tcolor: white;\n\t\tborder: none;\n\t\tpadding: 10px 15px;\n\t\tcursor: pointer;\n\t\t&.delete {\n\t\t\tbackground-color: red;\n\t\t}\n\t\t&.edit {\n\t\t\tbackground-color: blue;\n\t\t}\n\t\t&.done {\n\t\t\tbackground-color: green;\n\t\t\tvisibility: hidden;\n\t\t\ttransition: 200ms;\n\t\t\t&.Show {\n\t\t\t\tvisibility: visible;\n\t\t\t}\n\t\t}\n\t}\n`;\n\nconst MyrateConverter = value => {\n\tswitch (value) {\n\t\tcase 1:\n\t\t\treturn \"bad\";\n\t\tcase 2:\n\t\t\treturn \"good\";\n\t\tcase 3:\n\t\t\treturn \"better\";\n\t\tcase 4:\n\t\t\treturn \"oscar\";\n\t\tcase 5:\n\t\t\treturn \"beyond oscar\";\n\t\tdefault:\n\t\t\treturn \"beginner\";\n\t}\n};\n\nconst Movie = ({ details: { _id, name, myrate } }) => {\n\tconst [updateMovie] = useMutation(UPDATE_MOVIE_MUTATION);\n\tconst [deleteMovie] = useMutation(DELETE_MOVIE_MUTATION, {\n\t\tupdate: (proxy, { data: { deleteMovie } }) => {\n\t\t\tconst removedMovie = deleteMovie.movie;\n\t\t\tconst data = proxy.readQuery({\n\t\t\t\tquery: MOVIES_QUERY\n\t\t\t});\n\t\t\tproxy.writeQuery({\n\t\t\t\tquery: MOVIES_QUERY,\n\t\t\t\tdata: {\n\t\t\t\t\t...data,\n\t\t\t\t\tgetMovies: {\n\t\t\t\t\t\tmovies: data.getMovies.movies.filter(\n\t\t\t\t\t\t\tmovie => movie._id !== removedMovie._id\n\t\t\t\t\t\t)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t});\n\tconst [editing, setEditing] = useState(false);\n\tconst WrapperRef = useRef(null);\n\tconst nameRef = useRef(null);\n\tconst myrateRef = useRef(null);\n\tconst inputNameRef = useRef(null);\n\tconst inputMyrateRef = useRef(null);\n\tconst doneButtonRef = useRef(null);\n\tconst edit = () => {\n\t\tWrapperRef.current.classList.add(\"Outline\");\n\t\tdoneButtonRef.current.classList.add(\"Show\");\n\t\tsetEditing(true);\n\t};\n\n\tconst deleteSubmit = () => {\n\t\tdeleteMovie({ variables: { _id: _id } });\n\t};\n\n\tconst doneSubmit = () => {\n\t\tWrapperRef.current.classList.remove(\"Outline\");\n\t\tdoneButtonRef.current.classList.remove(\"Show\");\n\t\tconst variables = {\n\t\t\t_id,\n\t\t\tname: inputNameRef.current.value,\n\t\t\tmyrate: Number(inputMyrateRef.current.value)\n\t\t};\n\t\tsetEditing(false);\n\t\tupdateMovie({ variables });\n\t};\n\treturn (\n\t\t<Wrapper ref={WrapperRef}>\n\t\t\t<td className=\"name\" ref={nameRef}>\n\t\t\t\t{editing ? (\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\tref={inputNameRef}\n\t\t\t\t\t\tname=\"name\"\n\t\t\t\t\t\tdefaultValue={name}\n\t\t\t\t\t/>\n\t\t\t\t) : (\n\t\t\t\t\t<a href={`/${_id}`}>{name}</a>\n\t\t\t\t)}\n\t\t\t</td>\n\t\t\t<td className=\"myrate\" ref={myrateRef}>\n\t\t\t\t{editing ? (\n\t\t\t\t\t<select name=\"myrate\" ref={inputMyrateRef} defaultValue={myrate}>\n\t\t\t\t\t\t<option value={1}>bad</option>\n\t\t\t\t\t\t<option value={2}>good</option>\n\t\t\t\t\t\t<option value={3}>better</option>\n\t\t\t\t\t\t<option value={4}>oscar winning</option>\n\t\t\t\t\t\t<option value={5}>beyond oscar</option>\n\t\t\t\t\t</select>\n\t\t\t\t) : (\n\t\t\t\t\tMyrateConverter(myrate)\n\t\t\t\t)}\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<button className=\"edit\" onClick={edit}>\n\t\t\t\t\tedit\n\t\t\t\t</button>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<button className=\"delete\" onClick={deleteSubmit}>\n\t\t\t\t\tdelete\n\t\t\t\t</button>\n\t\t\t</td>\n\n\t\t\t<td>\n\t\t\t\t<button className=\"done\" onClick={doneSubmit} ref={doneButtonRef}>\n\t\t\t\t\tdone\n\t\t\t\t</button>\n\t\t\t</td>\n\t\t</Wrapper>\n\t);\n};\n\nexport default Movie;\n"]},"metadata":{},"sourceType":"module"}